<app-header></app-header>

<div class="container">
    <h2 class="section-title my-4">Каталог</h2>
    <hr>
    <div class="row">
        <div class="col-lg-3 mb-3">

            <div class="filter-section row">

                <button class="filter-icon col d-flex justify-content-end d-lg-none" (click)="toggleFilter()">

                </button>

                <div [ngClass]="{'collapse': !isFilterExpanded, 'show': isFilterExpanded}" class="d-lg-block">
                    <div class="my-3">
                        <h6>Категория</h6>
                        <select class="form-control form-control-sm" [(ngModel)]="selectedBrand">
                            <option value="">Все категории</option>
                            <option *ngFor="let brand of brands" [value]="brand">{{ brand }}</option>
                        </select>
                    </div>

  
                    <div *ngIf="isLoggedIn === 'true'" class="my-3">
                        <h6>Price Range</h6>
                        <input type="number" class="form-control my-3" placeholder="Minimum Price"
                            [(ngModel)]="minPrice">
                        <input type="number" class="form-control my-3" placeholder="Maximum Price"
                            [(ngModel)]="maxPrice">
                    </div>
                </div>
            </div>
        </div>


        <div class="col-lg-9">
            <!-- Right Product Section -->
            <div class="product-section">
                <!-- <h2 class="section-title my-4">Our Products</h2> -->


                <div class="row mt-3">
                    <!-- Total number of products -->
                    <div class="col sort-by d-flex justify-content-end">
                        <label for="sortOptions" class="me-2">Сортировать:</label>
                        <select id="sortOptions" [(ngModel)]="sortBy" (change)="applySort()">
                            <option value="">Нет</option>
                            <option value="priceLowToHigh">Цена: Дешевле</option>
                            <option value="priceHighToLow">Цена: Выше</option>

                        </select>
                    </div>
                </div>

                <div class="row" *ngIf="filteredProducts.length === 0">
                    <div class="col">
                    </div>
                </div>

                <div class="row" *ngIf="filteredProducts.length > 0">
                    <div class="col-md-3 my-3" *ngFor="let product of filteredProducts">
                        <div class="product-card border rounded p-4 text-center">
                            <h6 class="product-title mt-2">{{ product.name }}</h6>
                            <p class="product-description text-truncate">{{ product.product_desc }}</p>
                            <div class="product-footer">
                                <p *ngIf="isLoggedIn === 'true'" class="product-price">{{ product.price | currency }}</p>
                            </div>
                        </div>
                    </div>
                </div>
                <mat-card class="card" >
                    <mat-card-header>
                      <mat-card-title><h2>Мираторг</h2></mat-card-title>
                    </mat-card-header>
                    <mat-card-content>
                      <p>
                        Описание продукта
                      </p>
                    </mat-card-content>
                    <mat-card-actions>
                        <h5>350 руб</h5>
                      <button mat-button>Заказать</button>
                    </mat-card-actions>
                  </mat-card>
            </div>
        </div>
    </div>
</div>